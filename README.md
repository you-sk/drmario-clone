# Dr. Mario Clone

任天堂の名作パズルゲーム「Dr. Mario」のクローンゲームです。ブラウザで動作するHTML5/JavaScript実装です。

## ゲーム概要

Dr. Marioは落ち物パズルゲームの一種で、プレイヤーは2色のピルを操作してボード上のウイルスを全て消去することを目指します。同じ色のピースを4個以上縦または横に並べると消去されます。

## 機能

### 実装済み機能
- **ゲームボード**: 8×16のプレイフィールド
- **ピルシステム**: 
  - 2色のピルが上から落下
  - 4方向回転（0°、90°、180°、270°）
  - 左右移動、高速落下
- **ウイルスシステム**: 
  - レベルに応じたウイルス配置
  - 3色のウイルス（赤、青、黄）
  - ウイルスは固定位置（落下しない）
- **マッチングシステム**: 
  - 同色4個以上の縦・横並びで消去
  - ウイルスとピルの混合マッチング対応
  - 連鎖反応の実装
- **物理システム**: 
  - ピルのみに適用される重力
  - 段階的落下アニメーション
- **ゲームシステム**: 
  - レベル制（ウイルス数増加、落下速度上昇）
  - スコアシステム
  - 次のピル表示
  - ゲームオーバー/リスタート機能

### 操作方法
- **←→ (左右矢印)**: ピルの移動
- **↑ (上矢印)**: ピルの回転
- **↓ (下矢印)**: 高速落下
- **スペース**: ポーズ/ポーズ解除

## 技術仕様

- **言語**: HTML5, CSS3, JavaScript (ES6+)
- **レンダリング**: HTML5 Canvas
- **アーキテクチャ**: オブジェクト指向、単一クラス設計
- **レスポンシブ**: デスクトップブラウザ対応

## ファイル構成

```
drmario-claude/
├── index.html          # メインHTML
├── style.css           # スタイルシート
├── game.js             # ゲームロジック
├── package.json        # プロジェクト設定
├── CLAUDE.md          # 開発ガイド
└── README.md          # このファイル
```

## ゲームルール

1. **目的**: ボード上の全てのウイルスを消去する
2. **ピル操作**: 落下するピルを移動・回転させて配置
3. **消去条件**: 同色のピース（ウイルス・ピル）が4個以上縦または横に並ぶ
4. **レベルアップ**: 全ウイルス消去で次レベル
5. **ゲームオーバー**: ピルが画面上部まで積み上がる

## 開発情報

### 主要クラス: DrMarioGame

#### 重要メソッド
- `spawnNewPill()`: 新しいピルの生成
- `movePill(dx, dy)`: ピルの移動
- `rotatePill()`: ピルの回転
- `checkMatches()`: マッチング検出と消去
- `applyGravity()`: 重力適用（ピルのみ）
- `generateViruses()`: ウイルス配置

#### 色システム
- **ピル色**: `#ff0000` (赤), `#0000ff` (青), `#ffff00` (黄)
- **ウイルス色**: ピルと同色（マッチング用）+ 視覚的に暗色表示
- **マッチング**: 色値による厳密比較

## ライセンス

MIT License
